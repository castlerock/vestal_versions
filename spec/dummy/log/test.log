  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("schema_migrations")[0m
  [1m[35m (15.4ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (1.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateStudents (20140730090631)
  [1m[35m (0.3ms)[0m  CREATE TABLE "students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140730090631')[0m
Migrating to CreateLessons (20140730090639)
  [1m[35m (0.2ms)[0m  CREATE TABLE "lessons" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "student_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140730090639')[0m
Migrating to CreateVestalVersions (20140730091200)
  [1m[35m (0.4ms)[0m  CREATE TABLE "versions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "versioned_id" integer, "versioned_type" varchar(255), "user_id" integer, "user_type" varchar(255), "user_name" varchar(255), "modifications" text, "number" integer, "reverted_from" integer, "tag" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("versions")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_versions_on_versioned_id_and_versioned_type" ON "versions" ("versioned_id", "versioned_type")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("versions")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_versions_on_user_id_and_user_type" ON "versions" ("user_id", "user_type")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_list("versions")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_user_id_and_user_type')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_versions_on_user_name" ON "versions" ("user_name")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_list("versions")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_user_name')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_user_id_and_user_type')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_versions_on_number" ON "versions" ("number")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("versions")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_number')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_user_name')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_user_id_and_user_type')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_versions_on_tag" ON "versions" ("tag")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("versions")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_tag')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_number')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_user_name')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_user_id_and_user_type')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_versions_on_created_at" ON "versions" ("created_at")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20140730091200')
Migrating to AddRequestInfoToVersions (20140730091201)
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "versions" ADD "ip_address" varchar(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "versions" ADD "user_agent" varchar(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "versions" ADD "request_url" varchar(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20140730091201')
  [1m[36m (0.4ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("lessons")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_list("students")
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_list("versions")[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_created_at')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_tag')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_number')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_user_name')[0m
  [1m[35m (0.0ms)[0m  PRAGMA index_info('index_versions_on_user_id_and_user_type')
  [1m[36m (0.0ms)[0m  [1mPRAGMA index_info('index_versions_on_versioned_id_and_versioned_type')[0m
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.8ms)[0m  INSERT INTO "students" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00], ["name", "Nitin Misra"], ["updated_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "lessons" ("created_at", "student_id", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00], ["student_id", 1], ["title", "Title Before"], ["updated_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by LessonsController#update as HTML
  Parameters: {"student_id"=>"1", "id"=>"1"}
  [1m[36mStudent Load (0.2ms)[0m  [1mSELECT "students".* FROM "students" WHERE "students"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35mLesson Load (0.1ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."student_id" = 1 AND "lessons"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "lessons" SET "title" = 'Title After', "updated_at" = '2014-08-01 06:46:30.954867' WHERE "lessons"."id" = 1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("versions"."number") AS max_id FROM "versions" WHERE "versions"."versioned_id" = 1 AND "versions"."versioned_type" = 'Lesson'[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "versions" ("created_at", "ip_address", "modifications", "number", "request_url", "reverted_from", "tag", "updated_at", "user_agent", "user_id", "user_name", "user_type", "versioned_id", "versioned_type") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00], ["ip_address", "0.0.0.0"], ["modifications", "---\ntitle:\n- Title Before\n- Title After\n"], ["number", 2], ["request_url", "http://test.host/students/1/lessons/1"], ["reverted_from", nil], ["tag", nil], ["updated_at", Fri, 01 Aug 2014 06:46:30 UTC +00:00], ["user_agent", "Rails Testing"], ["user_id", 1], ["user_name", nil], ["user_type", "Student"], ["versioned_id", 1], ["versioned_type", "Lesson"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Rendered text template (0.0ms)
Completed 200 OK in 39ms (Views: 10.7ms | ActiveRecord: 1.4ms)
  [1m[35mLesson Load (0.1ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mVestalVersions::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."versioned_id" = 1 AND "versions"."versioned_type" = 'Lesson' ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mStudent Load (0.1ms)[0m  SELECT "students".* FROM "students" WHERE "students"."id" = 1 LIMIT 1
